<div>
  <div class="header">
    <div class="header__title">
      <bc-icon class="cancel-icon" [icon]="'cancel'" (click)="navigateBack()"></bc-icon>
      @if (isNew) {
        <p>{{ 'handle-filter.new-title' | translate }}</p>
      }
      @if (!isNew) {
        <p>{{ 'handle-filter.edit-title' | translate }}</p>
      }
    </div>
    <div class="header__buttons">
      @if (!isNew && !isLoading) {
        <bc-button
          [variant]="'tertiary'"
          [label]="'shared.action.delete' | translate"
          [color]="'warn'"
          (buttonClick)="openDeletePopup()"
        ></bc-button>
      }
      @if (!isNew && !isLoading) {
        <bc-button
          [variant]="'tertiary'"
          [label]="'shared.action.duplicate' | translate"
          (buttonClick)="duplicate()"
        ></bc-button>
      }
      @if (!isLoading) {
        <bc-button
          [disabled]="!this.filterForm.valid"
          [variant]="'tertiary'"
          [label]="'shared.action.save' | translate"
          (click)="save()"
        ></bc-button>
      }
      @if (isLoading) {
        <bc-spinner></bc-spinner>
      }
    </div>
  </div>
  <div>
    <form [formGroup]="filterForm" class="form">
      <bc-text
        #name
        [formControlName]="'name'"
        [label]="'handle-filter.name' | translate"
        [optionalText]="''"
        class="form__name"
        subscriptSizing="dynamic"
      ></bc-text>
      <bc-text
        [formControlName]="'description'"
        [label]="'handle-filter.description' | translate"
        [optionalText]="''"
        class="form__description"
        subscriptSizing="dynamic"
      ></bc-text>
    </form>
    <bc-divider></bc-divider>
    <div class="filter-container">
      <h5>{{ 'handle-filter.criteriaTitle' | translate }}</h5>
      @if (filter) {
        <app-filtered-person-table
          [searchType]="searchTypeFilter"
          [criteria]="filter.criteria"
          (criteriaChange)="filter.criteria = $event"
          (resetCriteria)="resetCriteria()"
        ></app-filtered-person-table>
      }
    </div>
  </div>
</div>
